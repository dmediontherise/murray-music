<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Murray's Theory v9.7</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css?v=9.7">
    
    <!-- Scripts (Defer ensures HTML is parsed first) -->
    <script src="js/theory.js?v=9.7" defer></script>
    <script src="js/curriculum.js?v=9.7" defer></script>
    <script src="js/renderer.js?v=9.7" defer></script>
    <script src="js/app.js?v=9.7" defer></script>
</head>
<body>

<div id="overlay" onclick="toggleMenu()"></div>

<header>
    <div style="display:flex; align-items:center; gap:15px;">
        <button id="menu-btn" onclick="toggleMenu()">â˜°</button>
        <div class="brand">Murray's Theory</div>
    </div>
    <div id="midi-badge">MIDI Off</div>
</header>

<div id="app">
    <nav id="sidebar">
        <div class="menu-head">Explore</div>
        <div class="menu-item active" onclick="setMode('FREE')">Free Play</div>
        <div class="menu-head">Book 1: Basic</div>
        <div id="bg-list"></div>
        <div class="menu-head">Book 2: Advanced</div>
        <div id="adv-list"></div>
    </nav>

    <div id="content">
        <div id="scroll-view">
            <div class="card" id="drill-card">
                <h2 id="drill-title">Free Play</h2>
                <div class="subtitle" id="drill-desc">Explore harmony freely.</div>
                
                <div class="context-box" id="context-box" style="display:none;">
                    <span style="font-size:1.4rem;">ðŸŽµ</span>
                    <div id="context-text">...</div>
                </div>

                <div id="staff-display"></div>
                <div id="sequence-tracker"></div>

                <div style="margin-top:20px; min-height:50px;">
                    <button class="btn btn-sec" id="hint-btn" onclick="showHint()" style="display:none;">ðŸ’¡ Hint</button>
                    <button class="btn btn-pri" id="next-btn" onclick="nextDrill()" style="display:none;">Next Challenge â†’</button>
                </div>
            </div>
        </div>
        
        <div id="analysis-bar">Waiting...</div>

        <div id="piano-wrap">
            <button id="scroll-left" class="scroll-btn">â€¹</button>
            <div id="piano-keys" class="piano-keys"></div>
            <button id="scroll-right" class="scroll-btn">â€º</button>
        </div>
    </div>
</div>

</body>
</html>
